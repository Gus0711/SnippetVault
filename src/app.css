@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@theme {
	--color-background: var(--bg);
	--color-surface: var(--sf);
	--color-border: var(--bd);
	--color-foreground: var(--tx);
	--color-muted: var(--tx-muted);
	--color-accent: var(--ac);
}

:root {
	--bg: #ffffff;
	--sf: #f8f9fa;
	--bd: #e2e4e8;
	--tx: #1a1a1a;
	--tx-muted: #6b7280;
	--ac: #0891b2;
	--ac-light: #22d3ee;
	--ac-dark: #0e7490;
}

.dark {
	--bg: #0d1117;
	--sf: #161b22;
	--bd: #30363d;
	--tx: #e6edf3;
	--tx-muted: #8b949e;
	--ac: #22d3ee;
	--ac-light: #67e8f9;
	--ac-dark: #0891b2;
}

body {
	background-color: var(--bg);
	color: var(--tx);
	font-family:
		-apple-system,
		BlinkMacSystemFont,
		'Segoe UI',
		Roboto,
		Oxygen,
		Ubuntu,
		Cantarell,
		'Open Sans',
		'Helvetica Neue',
		sans-serif;
	font-size: 15px;
	line-height: 1.6;
}

/* TipTap Editor Styles */
.tiptap {
	outline: none;
	min-height: 200px;
}

.tiptap:focus {
	outline: none;
}

.tiptap p {
	margin: 0.75rem 0;
	line-height: 1.6;
}

.tiptap p:first-child {
	margin-top: 0;
}

.tiptap p.is-editor-empty:first-child::before {
	content: attr(data-placeholder);
	float: left;
	color: var(--tx-muted);
	pointer-events: none;
	height: 0;
}

.tiptap pre {
	background: var(--sf);
	border: 1px solid var(--bd);
	border-radius: 0.5rem;
	padding: 1.25rem;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	font-size: 0.9375rem;
	line-height: 1.7;
	overflow-x: auto;
	margin: 1rem 0;
}

.tiptap pre code {
	background: none;
	padding: 0;
	font-size: inherit;
	color: inherit;
}

.tiptap code {
	background: var(--sf);
	border-radius: 0.25rem;
	padding: 0.2rem 0.4rem;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	font-size: 0.9em;
}

.tiptap img {
	max-width: 100%;
	height: auto;
	border-radius: 0.5rem;
	margin: 0.75rem 0;
}

.tiptap img.ProseMirror-selectednode {
	outline: 2px solid var(--ac);
}

.tiptap blockquote {
	border-left: 3px solid var(--bd);
	padding-left: 1rem;
	margin: 0.75rem 0;
	margin-left: 0;
	color: var(--tx-muted);
}

.tiptap ul,
.tiptap ol {
	padding-left: 1.5rem;
	margin: 0.5rem 0;
}

.tiptap li {
	margin: 0.25rem 0;
}

.tiptap h1,
.tiptap h2,
.tiptap h3 {
	font-weight: 600;
	margin-top: 1.75rem;
	margin-bottom: 0.75rem;
	line-height: 1.4;
}

.tiptap h1:first-child,
.tiptap h2:first-child,
.tiptap h3:first-child {
	margin-top: 0;
}

.tiptap h1 {
	font-size: 1.75rem;
}

.tiptap h2 {
	font-size: 1.4rem;
}

.tiptap h3 {
	font-size: 1.2rem;
}

.tiptap hr {
	border: none;
	border-top: 1px solid var(--bd);
	margin: 1.5rem 0;
}

.tiptap a {
	color: var(--ac);
	text-decoration: underline;
}

.tiptap a:hover {
	opacity: 0.8;
}

/* TipTap table card wrapper */
.tiptap .tableWrapper {
	background-color: var(--sf);
	border: 1px solid var(--bd);
	border-radius: 0.5rem;
	padding: 1rem;
	margin: 1rem 0;
	max-width: 900px;
	overflow-x: auto;
}

.tiptap table {
	border-collapse: collapse;
	width: auto;
	margin: 0;
	table-layout: auto;
}

.tiptap th,
.tiptap td {
	border: 1px solid var(--bd);
	padding: 0.75rem 1rem;
	text-align: left;
	min-width: 80px;
	position: relative;
	vertical-align: top;
	font-size: 0.875rem;
}

.tiptap th {
	background-color: color-mix(in srgb, var(--sf) 50%, var(--bg));
	font-weight: 600;
	color: var(--tx);
	border-bottom: 2px solid var(--bd);
}

.tiptap td {
	background-color: transparent;
}

.tiptap tr:hover td {
	background-color: color-mix(in srgb, var(--sf) 30%, transparent);
}

.tiptap .selectedCell::after {
	content: '';
	position: absolute;
	inset: 0;
	background-color: var(--ac);
	opacity: 0.15;
	pointer-events: none;
}

.tiptap .column-resize-handle {
	position: absolute;
	right: -2px;
	top: 0;
	bottom: 0;
	width: 4px;
	background-color: var(--ac);
	cursor: col-resize;
	opacity: 0;
	transition: opacity 0.15s;
}

.tiptap table:hover .column-resize-handle,
.tiptap .column-resize-handle:hover {
	opacity: 1;
}

/* Code block with language selector */
.tiptap .code-block-wrapper {
	position: relative;
	margin: 0.75rem 0;
}

.tiptap .code-block-wrapper pre {
	margin: 0;
}

/*
 * Syntax highlighting for lowlight/highlight.js (One Dark theme)
 * These styles apply to both the TipTap editor and rendered code blocks
 */

/* Light mode - GitHub Light inspired */
.hljs-comment,
.hljs-quote {
	color: #6a737d;
	font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-meta .hljs-keyword {
	color: #d73a49;
}

.hljs-string,
.hljs-doctag,
.hljs-regexp {
	color: #032f62;
}

.hljs-number,
.hljs-literal {
	color: #005cc5;
}

.hljs-title,
.hljs-section,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-title.function_ {
	color: #6f42c1;
}

.hljs-attr,
.hljs-attribute,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-params {
	color: #e36209;
}

.hljs-built_in,
.hljs-builtin-name {
	color: #005cc5;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-subst,
.hljs-meta {
	color: #005cc5;
}

.hljs-addition {
	color: #22863a;
	background-color: #f0fff4;
}

.hljs-deletion {
	color: #b31d28;
	background-color: #ffeef0;
}

/* Dark mode - One Dark / GitHub Dark inspired */
.dark .hljs-comment,
.dark .hljs-quote {
	color: #8b949e;
	font-style: italic;
}

.dark .hljs-keyword,
.dark .hljs-selector-tag,
.dark .hljs-meta .hljs-keyword {
	color: #ff7b72;
}

.dark .hljs-string,
.dark .hljs-doctag,
.dark .hljs-regexp {
	color: #a5d6ff;
}

.dark .hljs-number,
.dark .hljs-literal {
	color: #79c0ff;
}

.dark .hljs-title,
.dark .hljs-section,
.dark .hljs-name,
.dark .hljs-selector-id,
.dark .hljs-selector-class,
.dark .hljs-title.function_ {
	color: #d2a8ff;
}

.dark .hljs-attr,
.dark .hljs-attribute,
.dark .hljs-variable,
.dark .hljs-template-variable,
.dark .hljs-type,
.dark .hljs-params {
	color: #ffa657;
}

.dark .hljs-built_in,
.dark .hljs-builtin-name {
	color: #79c0ff;
}

.dark .hljs-symbol,
.dark .hljs-bullet,
.dark .hljs-link,
.dark .hljs-subst,
.dark .hljs-meta {
	color: #79c0ff;
}

.dark .hljs-addition {
	color: #7ee787;
	background-color: rgba(46, 160, 67, 0.15);
}

.dark .hljs-deletion {
	color: #ffa198;
	background-color: rgba(248, 81, 73, 0.15);
}

/* Shiki code blocks for snippet view */
.snippet-code-block pre {
	margin: 0;
	padding: 1.25rem;
	overflow-x: auto;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	font-size: 0.9375rem;
	line-height: 1.7;
}

.snippet-code-block pre code {
	background: none;
	padding: 0;
}

.snippet-code-block .shiki {
	background-color: var(--sf) !important;
}

/* Markdown prose styles for snippet view */
.prose {
	color: var(--tx);
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
	color: var(--tx);
}

.prose h1 {
	font-size: 1.75rem;
	font-weight: 600;
	margin-top: 1.5rem;
	margin-bottom: 0.75rem;
}

.prose h2 {
	font-size: 1.4rem;
	font-weight: 600;
	margin-top: 1.5rem;
	margin-bottom: 0.75rem;
}

.prose h3 {
	font-size: 1.2rem;
	font-weight: 600;
	margin-top: 1.25rem;
	margin-bottom: 0.5rem;
}

.prose p {
	color: var(--tx);
	margin: 0.75rem 0;
	line-height: 1.6;
}

.prose ul,
.prose ol {
	color: var(--tx);
	padding-left: 1.5rem;
	margin: 0.5rem 0;
}

.prose li {
	margin: 0.25rem 0;
}

.prose strong {
	color: var(--tx);
	font-weight: 600;
}

.prose code {
	color: var(--tx);
	background: var(--sf);
	border-radius: 0.25rem;
	padding: 0.2rem 0.4rem;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	font-size: 0.9em;
}

.prose blockquote {
	border-left: 3px solid var(--bd);
	padding-left: 1rem;
	margin: 0.75rem 0;
	color: var(--tx-muted);
}

.prose a {
	color: var(--ac);
	text-decoration: underline;
}

.prose pre {
	background: var(--sf);
	border: 1px solid var(--bd);
	border-radius: 0.5rem;
	padding: 1.25rem;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	font-size: 0.9375rem;
	line-height: 1.7;
	overflow-x: auto;
	margin: 1rem 0;
}

.prose pre code {
	background: none;
	padding: 0;
}

/* Table styles for prose (view mode) */
.prose table {
	border-collapse: collapse;
	width: auto;
	max-width: 100%;
	margin: 1rem 0;
	font-size: 0.875rem;
}

.prose th,
.prose td {
	border: 1px solid var(--bd);
	padding: 0.75rem 1rem;
	text-align: left;
	vertical-align: top;
}

.prose th {
	background-color: var(--sf);
	font-weight: 600;
	color: var(--tx);
}

.prose td {
	background-color: transparent;
}

.prose tr:hover td {
	background-color: var(--sf);
}

/* Table card wrapper for prose */
.prose .table-wrapper,
.table-card {
	background-color: var(--sf);
	border: 1px solid var(--bd);
	border-radius: 0.5rem;
	padding: 1rem;
	margin: 1rem 0;
	max-width: 900px;
	overflow-x: auto;
}

.prose .table-wrapper table,
.table-card table {
	margin: 0;
	width: auto;
}

/* Code block collapse styles for editor */
.tiptap pre.code-collapsed {
	position: relative;
	max-height: calc(1.6em * 5 + 2rem);
	overflow: hidden;
}

.tiptap pre.code-collapsed::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 3rem;
	background: linear-gradient(transparent, var(--sf));
	pointer-events: none;
}

.tiptap pre:focus-within {
	max-height: none !important;
}

.tiptap pre:focus-within::after {
	display: none;
}
