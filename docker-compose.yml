services:
  snippetvault:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
    # Optional .env file for custom configuration
    # If not present, defaults are used (SECRET_KEY auto-generated, CSRF disabled)
    env_file:
      - path: .env
        required: false
    environment:
      # Fixed values (not user-configurable)
      - DATABASE_URL=file:/app/data/snippetvault.db
      - UPLOAD_DIR=/app/data/uploads
      # Configurable via .env file:
      # - SECRET_KEY: auto-generated if not set
      # - ORIGIN: set for production (enables CSRF protection)
      # - UPLOAD_MAX_SIZE: default 52428800 (50MB)
      # - SHOW_LANDING_PAGE: default false
      # - AUTO_CREATE_ADMIN: default true (admin@snippetvault.local / admin)
    restart: unless-stopped

# MCP Server is optional - see docker-compose.mcp.yml
# To enable: docker compose -f docker-compose.yml -f docker-compose.mcp.yml up -d
